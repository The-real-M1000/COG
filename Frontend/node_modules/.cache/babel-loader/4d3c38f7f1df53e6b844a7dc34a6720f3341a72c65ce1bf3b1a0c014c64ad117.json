{"ast":null,"code":"import{useEffect,useState}from\"react\";import{useNavigate,useSearchParams}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AuthCallback(){const navigate=useNavigate();const[searchParams]=useSearchParams();const[status,setStatus]=useState(\"Procesando...\");useEffect(()=>{const processAuth=()=>{console.log(\"üîó AuthCallback montado\");console.log(\"üìç URL completa:\",window.location.href);console.log(\"üîç SearchParams:\",searchParams.toString());const token=searchParams.get(\"token\");if(token){console.log(\"üéüÔ∏è Token recibido (primeros 20 chars):\",token.substring(0,20)+\"...\");setStatus(\"Token recibido, guardando...\");// Guardar el token en localStorage\nlocalStorage.setItem(\"steam_token\",token);console.log(\"üíæ Token guardado en localStorage\");// Verificar que se guard√≥ correctamente\nconst savedToken=localStorage.getItem(\"steam_token\");if(savedToken===token){console.log(\"‚úÖ Token verificado en localStorage\");setStatus(\"¬°Autenticaci√≥n exitosa! Redirigiendo...\");// Redirigir a la biblioteca despu√©s de 1 segundo\nsetTimeout(()=>{console.log(\"‚û°Ô∏è Redirigiendo a /library\");navigate(\"/library\");},1000);}else{console.error(\"‚ùå Error: Token no se guard√≥ correctamente\");setStatus(\"Error guardando token\");setTimeout(()=>navigate(\"/login\"),2000);}}else{console.error(\"‚ùå No se recibi√≥ token en la URL\");console.log(\"üìã Par√°metros disponibles:\",Array.from(searchParams.entries()));setStatus(\"Error: No se recibi√≥ token\");setTimeout(()=>{navigate(\"/login\");},2000);}};processAuth();},[searchParams,navigate]);return/*#__PURE__*/_jsxs(\"div\",{className:\"login-screen\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"page-title\",children:\"\\uD83D\\uDD10 Autenticando\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#aaa',marginTop:'20px',fontSize:'18px'},children:status}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'30px',fontSize:'14px',color:'#666'},children:/*#__PURE__*/_jsx(\"p\",{children:\"Abre la consola (F12) para ver detalles t\\xE9cnicos\"})})]});}","map":{"version":3,"names":["useEffect","useState","useNavigate","useSearchParams","jsx","_jsx","jsxs","_jsxs","AuthCallback","navigate","searchParams","status","setStatus","processAuth","console","log","window","location","href","toString","token","get","substring","localStorage","setItem","savedToken","getItem","setTimeout","error","Array","from","entries","className","children","style","color","marginTop","fontSize"],"sources":["/home/m1000/gaming-hub/Frontend/src/pages/AuthCallback.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\n\nexport default function AuthCallback() {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const [status, setStatus] = useState(\"Procesando...\");\n\n  useEffect(() => {\n    const processAuth = () => {\n      console.log(\"üîó AuthCallback montado\");\n      console.log(\"üìç URL completa:\", window.location.href);\n      console.log(\"üîç SearchParams:\", searchParams.toString());\n      \n      const token = searchParams.get(\"token\");\n\n      if (token) {\n        console.log(\"üéüÔ∏è Token recibido (primeros 20 chars):\", token.substring(0, 20) + \"...\");\n        setStatus(\"Token recibido, guardando...\");\n        \n        // Guardar el token en localStorage\n        localStorage.setItem(\"steam_token\", token);\n        console.log(\"üíæ Token guardado en localStorage\");\n        \n        // Verificar que se guard√≥ correctamente\n        const savedToken = localStorage.getItem(\"steam_token\");\n        if (savedToken === token) {\n          console.log(\"‚úÖ Token verificado en localStorage\");\n          setStatus(\"¬°Autenticaci√≥n exitosa! Redirigiendo...\");\n          \n          // Redirigir a la biblioteca despu√©s de 1 segundo\n          setTimeout(() => {\n            console.log(\"‚û°Ô∏è Redirigiendo a /library\");\n            navigate(\"/library\");\n          }, 1000);\n        } else {\n          console.error(\"‚ùå Error: Token no se guard√≥ correctamente\");\n          setStatus(\"Error guardando token\");\n          setTimeout(() => navigate(\"/login\"), 2000);\n        }\n      } else {\n        console.error(\"‚ùå No se recibi√≥ token en la URL\");\n        console.log(\"üìã Par√°metros disponibles:\", Array.from(searchParams.entries()));\n        setStatus(\"Error: No se recibi√≥ token\");\n        setTimeout(() => {\n          navigate(\"/login\");\n        }, 2000);\n      }\n    };\n\n    processAuth();\n  }, [searchParams, navigate]);\n\n  return (\n    <div className=\"login-screen\">\n      <h1 className=\"page-title\">üîê Autenticando</h1>\n      <p style={{ color: '#aaa', marginTop: '20px', fontSize: '18px' }}>\n        {status}\n      </p>\n      <div style={{ marginTop: '30px', fontSize: '14px', color: '#666' }}>\n        <p>Abre la consola (F12) para ver detalles t√©cnicos</p>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}